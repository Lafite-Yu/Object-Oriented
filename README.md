# Java Readme

## 电梯调度策略

电梯的调度策略与作业指导书相同，下面对同质请求的情况进行明确：

请求类型共分为三类：ER，FR-UP，FR-DOWN

某条请求A的同质请求指的是在发出请求的时间在请求A发出后且在A执行完毕之间、且请求类型和目标楼层与请求A相同的请求

## 输入要求

### 合法请求的定义

合法请求需要符合以下要求，如果输入了不合法的请求，程序报错，该请求将被抛弃

报错格式：

```
st:INVALID[去除所有空格的输入内容,T]
```

中括号内的内容为去除了所有空格的原输入内容和输入的电梯系统时间，其中前者的先导零和符号等不作处理

#### 1. 语法要求

语法合法的请求包括以下三种：

(FR,(FLOOR),UP)
(FR,(FLOOR),DOWN)
(ER,#(ElevatorNum),(FLOOR))

输入中的半角空格将被忽略，全角空格和TAB等将不被忽略而作为非法输入

其中，FLOOR的格式为：一个可选的正号+一个可以包括前导零但是包括前导零的总数字位数为1-2位的数字，FLOOR的范围为1-20之间的整数

指令的时间为电梯的系统时间，即相对于输入的第一条指令（包括有效和无效指令）的时间

#### 2. 指令顺序和含义的要求

输入`END`后用于获取输入的线程停止，其它线程在执行完毕后停止

复制粘贴的时候请不要复制粘贴一大段请求，若测试同时输入的请求，请改为用分号分割的同一行请求

输入全为英文状态，忽略空格和制表符。

无效请求在运行的时候会忽略，包括不符合规则的和超出每行50条限制、用分号分割的指令

## 运行说明

如果多部电梯都可以捎带或是都处在空闲状态，可以处理同一请求，则将指令分配给标号最小的电梯，若运动量也都相同，则选取编号最小的电梯

由于程序运行时资源的互相争抢和占用，输出的时间可能会随机性的出现偏差- -

## 输出

输入的请求分为三类：

1.不合法的请求，参见上一节

2.合法的同质请求，参见第一节

3.合法的、且与其之前指令不同质的指令

这一部分的指令，包括普通请求和捎带请求

根据指令类型的不同，输出格式详见作业指导书

## ALS单线程电梯的更新日志

修复bug若干：

修复了因为只在进行弹出操作时检查了是否为空，没有检查弹出后是否为空就直接进行打印操作而导致的没有有效指令即开始运行带来的错误输出的bug

修复了只检查第一条指令是否为一楼而导致的将第一条指令为(ER,1,0)判断为有效指令的bug

修复了因为情况考虑不全导致的在某些极少情况下没有计算开关门时间的bug