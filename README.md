# Java Readme

## IFTTT

本次作业花了很多时间，但是由于时间紧任务重作业指导书不明确等原因，难免会有考虑不周之处和没有来得及进行充分测试留下的bug，请多包涵。另外，如果你在测试中发现一些会导致无效作业的问题的话：.._:(´_`」 ∠):_ ...跪下求饶

### 输入格式

#### 指令格式

读入以空格作为间隔，并且路径为绝对路径，包括文件和目录（不支持空格，例如D:/code/test），一行只能读入一条监控请求，不支持一行读入用分号分割的多条请求。正确输入比如： IF D:/code/test Modified THEN record-summary

支持的监视器类型包括 `renamed` `Modified` `path-changed` `size-changed` 

支持的任务类型包括 `record-summary` `record-detail` `recover` 

大小写敏感，由于本次作业的issue中提到不进行输入格式的测试，因此没有实现输入格式的判断，需要自行输入合法的命令格式，敬请谅解

#### 结束指令

当程序读入到`end`的时候(不区分大小写），程序认为是读入终止，开始进行监视器的设置和初始化。

可以设立的监视器的数量（即有效指令的数量）最多为10个，如果已经读入了十个请求，则输入听此。不能输入完全相同的指令，输入完全相同的指令（文件名、监控器类型、操作类型）则该指令将被舍弃；可以对同一文件设定不同类型的监控器和操作（即最多3*4=12个）。

### 程序执行和输出

程序的输出结果保存在D盘根目录下的 result.txt 和 detail.txt 里，如果你没有D盘的话……请自行修改，控制台也将实时输出正在执行的任务内容。

依照指导书，不允许对同一个文件实施两次或两次以上的变化和修改，所以如果某文件检测到修改或变化后，则该文件的所有监控器停止。

对一个文件夹的监控被定义为分别对该文件夹下的所有内容设定相同类型的监控器，因此不允许重复设定监控器，将直接在控制台输出提示内容然后舍弃后输入的指令，例如对已监控文件的父目录、已监控目录的子目录、父目录、文件等进行监控。

`Summary` 和 `Detail` 线程每隔5秒进行文件写入，同时在触发器触发时控制台也会输出相应信息

### 测试

完成测试后，请手动停止程序

程序中存在的问题请多包涵，不要互相伤害，虽然已经进行过一些测试，但是由于是最后实现的测试线程和完整的`SafeFile`类，没有在加入后进行完整的测试，如果可能出现无效问题的话……再次跪求

如果进行`a`重命名为`c`, `b` 重命名为 `a` 这样的操作时，可能由于重命名操作持续占用了读写文件的锁导致不能检测到所有的操作，请重新测试或在两个测试操作之间`sleep` 一定时间，再次感谢

/*非常感谢你耐心读到这里！谢谢你！大家共同进步，祝OO顺利(⊙ω⊙)！*/